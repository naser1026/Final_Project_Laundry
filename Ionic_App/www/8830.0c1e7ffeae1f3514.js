"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8830],{8830:(F,g,l)=>{l.r(g),l.d(g,{AddpesananPageModule:()=>j});var p=l(177),u=l(4341),o=l(1075),d=l(8986),h=l(467),t=l(4438),m=l(1950),_=l(9891);const f=()=>["/pilihpelanggan"],P=()=>[0,2,1,1];function M(a,r){if(1&a){const i=t.RV6();t.j41(0,"ion-item")(1,"ion-label")(2,"p",24),t.EFF(3),t.k0s(),t.j41(4,"h2",25),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.nI1(8,"currencyRp"),t.k0s()(),t.j41(9,"div")(10,"ion-buttons",26)(11,"ion-button",20),t.bIt("click",function(){const e=t.eBV(i).$implicit,s=t.XpG();return t.Njj(s.decreaseQuantity(e))}),t.nrm(12,"ion-icon",27),t.k0s(),t.j41(13,"ion-input",28),t.mxI("ngModelChange",function(e){const s=t.eBV(i).$implicit;return t.DH7(s.quantity,e)||(s.quantity=e),t.Njj(e)}),t.bIt("ionChange",function(e){const s=t.eBV(i).$implicit,c=t.XpG();return t.Njj(c.onQuantityChange(s,e))}),t.k0s(),t.j41(14,"ion-button",20),t.bIt("click",function(){const e=t.eBV(i).$implicit,s=t.XpG();return t.Njj(s.increaseQuantity(e))}),t.nrm(15,"ion-icon",29),t.k0s()()()()}if(2&a){const i=r.$implicit,n=t.XpG();t.R7$(3),t.Lme(" ",n.duration.name," - ",i.package_type," "),t.R7$(2),t.JRh(i.name),t.R7$(2),t.JRh(t.bMT(8,6,i.price)),t.R7$(6),t.R50("ngModel",i.quantity),t.Y8G("value",n.formatQuantity(i))}}function b(a,r){if(1&a&&(t.j41(0,"ion-select-option",41),t.EFF(1),t.k0s()),2&a){const i=r.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ",i.name," ")}}function k(a,r){if(1&a&&(t.j41(0,"ion-select-option",41),t.EFF(1),t.k0s()),2&a){const i=r.$implicit;t.Y8G("value",i.id),t.R7$(),t.SpI(" ","percentage"===i.discount_type?i.value+"%":"Rp "+i.value," ")}}function x(a,r){if(1&a){const i=t.RV6();t.qex(0),t.j41(1,"ion-content")(2,"div",30)(3,"div",31)(4,"h2"),t.EFF(5,"Atur Pesanan"),t.k0s()(),t.j41(6,"ion-item")(7,"ion-label"),t.EFF(8,"Parfum"),t.k0s(),t.j41(9,"ion-select",32),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.parfum,e)||(s.parfum=e),t.Njj(e)}),t.j41(10,"ion-select-option",33),t.EFF(11,"Tidak"),t.k0s(),t.DNE(12,b,2,2,"ion-select-option",34),t.k0s()(),t.j41(13,"ion-item")(14,"ion-label"),t.EFF(15,"Diskon"),t.k0s(),t.j41(16,"ion-select",35),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.diskon,e)||(s.diskon=e),t.Njj(e)}),t.j41(17,"ion-select-option",33),t.EFF(18,"Tidak"),t.k0s(),t.DNE(19,k,2,2,"ion-select-option",34),t.k0s()(),t.j41(20,"div",36),t.nrm(21,"ion-icon",37),t.j41(22,"ion-input",38),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.catatan,e)||(s.catatan=e),t.Njj(e)}),t.k0s()(),t.j41(23,"div",39)(24,"ion-button",40),t.bIt("click",function(){t.eBV(i);const e=t.XpG();return t.Njj(e.buatPesanan())}),t.EFF(25," Buat Pesanan "),t.k0s()()()(),t.bVm()}if(2&a){const i=t.XpG();t.R7$(9),t.R50("ngModel",i.parfum),t.R7$(3),t.Y8G("ngForOf",i.DataParfum),t.R7$(4),t.R50("ngModel",i.diskon),t.R7$(3),t.Y8G("ngForOf",i.DataDiskon),t.R7$(3),t.R50("ngModel",i.catatan)}}const y=[{path:"",component:(()=>{var a;class r{constructor(n,e,s,c){this.api=n,this.router=e,this.alertController=s,this.modalController=c,this.DataPaket=[],this.totalWeight=0,this.totalPieces=0,this.totalDistance=0,this.totalPrice=0,this.DataParfum=[],this.DataDiskon=[],this.parfum="",this.diskon="",this.catatan="",this.isModalOpen=!1,this.form={list_id_package:"",list_count:"",id_parfum:"",id_customer:"",total_price:"",total_service:"",id_discount:"",information:""}}ngOnInit(){var n;const e=null===(n=this.router.getCurrentNavigation())||void 0===n?void 0:n.extras.state;e&&(this.customer=e.customer,this.duration=e.duration),this.GetPaket(),this.checkForRefresh(),this.GetParfum(),this.GetDiskon()}GetPaket(){this.api.GetListPaket().subscribe(n=>{this.DataPaket=n.data.packages.filter(e=>e.id_duration===this.duration.id).map(e=>({...e,quantity:0})),console.log("Data Paket ===>"+JSON.stringify(this.DataPaket))})}GetParfum(){this.api.GetListParfum().subscribe(n=>{this.DataParfum=n.data.parfums,console.log("Data Parfum ===>"+JSON.stringify(this.DataParfum))})}GetDiskon(){this.api.GetListDiskon().subscribe(n=>{this.DataDiskon=n.discounts.filter(e=>"percentage"===e.discount_type||"fixed"===e.discount_type),console.log("Data Diskon ===>"+JSON.stringify(this.DataDiskon))})}formatQuantity(n){return"Kiloan"===n.package_type||"Meteran"===n.package_type?n.quantity.toFixed(2):n.quantity.toString()}increaseQuantity(n){"Kiloan"===n.package_type||"Meteran"===n.package_type?n.quantity=parseFloat((n.quantity+.01).toFixed(2)):n.quantity++,this.updateTotals()}decreaseQuantity(n){n.quantity>0&&("Kiloan"===n.package_type||"Meteran"===n.package_type?n.quantity=parseFloat((n.quantity-.01).toFixed(2)):n.quantity--,this.updateTotals())}onQuantityChange(n,e){const c=parseFloat(e.target.value);n.quantity=!isNaN(c)&&c>=0?c:0,this.updateTotals()}updateMetrics(){this.totalWeight=0,this.totalPieces=0,this.totalDistance=0,this.DataPaket.forEach(n=>{"Kiloan"===n.package_type?this.totalWeight+=n.quantity:"Satuan"===n.package_type?this.totalPieces+=n.quantity:"Meteran"===n.package_type&&(this.totalDistance+=n.quantity)})}updateTotals(){this.updateMetrics(),this.totalPrice=this.DataPaket.reduce((n,e)=>"Kiloan"===e.package_type||"Meteran"===e.package_type||"Satuan"===e.package_type?n+e.quantity*e.price:n,0)}continueOrder(){this.isModalOpen=!0}openModal(){this.isModalOpen=!0}onWillDismiss(n){this.isModalOpen=!1}dismissModal(){this.isModalOpen=!1,this.modalController.dismiss()}buatPesanan(){const n=this.DataPaket.filter(e=>e.quantity>0);this.form.list_id_package=n.map(e=>e.id).join(","),this.form.list_count=n.map(e=>e.quantity).join(","),this.form.id_parfum=this.parfum?this.parfum:"tidak",this.form.id_discount=this.diskon,this.form.information=this.catatan,this.form.id_customer=this.customer.id,this.form.total_price=this.totalPrice.toString(),this.api.buatpesanan(this.form).subscribe(e=>{this.showAlert("Pesanan Berhasil Dibuat","Sukses"),this.router.navigate(["/rincianpesanan"])},e=>{this.showAlert("Gagal Membuat Pesanan","Error")})}showAlert(n,e){var s=this;return(0,h.A)(function*(){yield(yield s.alertController.create({header:n,subHeader:e,buttons:["OK"]})).present()})()}checkForRefresh(){const n=this.router.getCurrentNavigation();null!=n&&n.extras.state&&n.extras.state.refresh&&this.GetPaket()}handleRefresh(n){console.log("Refreshing data..."),this.GetPaket(),n.target.complete()}}return(a=r).\u0275fac=function(n){return new(n||a)(t.rXU(m.F),t.rXU(d.Ix),t.rXU(o.hG),t.rXU(o.W3))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-addpesanan"]],decls:58,vars:17,consts:[[3,"fullscreen"],[1,"overlay"],[1,"card"],[1,"toolbar-content"],["name","arrow-back-outline","size","large",1,"ikon",3,"routerLink"],[1,"toolbar-title"],[1,"spacer"],[1,"horizontal-lines"],["slot","fixed",3,"ionRefresh"],["pullingText","Pull to refresh","refreshingSpinner","circles"],[1,"teks"],[1,"list-container"],[4,"ngFor","ngForOf"],[1,"card-color"],["size","auto"],["src","../../../assets/image/person.jpg",1,"profile-img"],["size","auto",1,"stats"],[1,"stats-container"],[1,"color"],[1,"right-buttons"],[3,"click"],["name","arrow-forward"],["handleBehavior","cycle",3,"willDismiss","isOpen","initialBreakpoint","breakpoints"],[4,"ngIf"],[1,"paket"],[1,"name"],[1,"select-button"],["name","remove"],[3,"ngModelChange","ionChange","ngModel","value"],["name","add"],[1,"modal-container"],[1,"modal-header"],["placeholder","Pilih Parfum",3,"ngModelChange","ngModel"],["value","tidak"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Pilih Diskon",3,"ngModelChange","ngModel"],[1,"container"],["name","person-circle-outline",1,"icon",2,"margin-right","2%"],["color","success","label","Catatan","label-placement","floating","fill","outline","shape","round","autoGrow","",3,"ngModelChange","ngModel"],[1,"button-container1"],["expand","block","color","success",1,"custom-button",3,"click"],[3,"value"]],template:function(n,e){1&n&&(t.j41(0,"ion-content",0)(1,"div",1)(2,"ion-card",2)(3,"div")(4,"ion-card-header")(5,"ion-toolbar")(6,"div",3),t.nrm(7,"ion-icon",4),t.j41(8,"h1",5),t.EFF(9,"TAMBAHKAN LAYANAN"),t.k0s(),t.nrm(10,"div",6),t.k0s()(),t.nrm(11,"div",7),t.k0s(),t.j41(12,"ion-refresher",8),t.bIt("ionRefresh",function(c){return e.handleRefresh(c)}),t.nrm(13,"ion-refresher-content",9),t.k0s(),t.j41(14,"div",10)(15,"ion-text"),t.EFF(16,' Tekan tombol "+" untuk menambahkan layanan, untuk mengganti jumlah layanan dengan mengetik secara langsung dapat di klik pada bagian angka '),t.k0s()(),t.j41(17,"div",11)(18,"ion-list"),t.DNE(19,M,16,8,"ion-item",12),t.k0s(),t.j41(20,"ion-card")(21,"ion-card-content",13)(22,"ion-grid")(23,"ion-row")(24,"ion-col",14),t.nrm(25,"ion-img",15),t.k0s(),t.j41(26,"ion-col")(27,"ion-label")(28,"h2"),t.EFF(29),t.k0s(),t.j41(30,"p"),t.EFF(31),t.k0s()()(),t.j41(32,"ion-col",16)(33,"ion-label")(34,"div",17)(35,"p"),t.EFF(36),t.k0s(),t.j41(37,"p"),t.EFF(38),t.k0s(),t.j41(39,"p"),t.EFF(40),t.k0s()()()()()()(),t.j41(41,"ion-footer")(42,"ion-toolbar")(43,"ion-grid",18)(44,"ion-row")(45,"ion-col",14)(46,"ion-title"),t.EFF(47),t.nI1(48,"currencyRp"),t.k0s(),t.j41(49,"p"),t.EFF(50,"Total Layanan"),t.k0s()(),t.j41(51,"ion-col")(52,"ion-buttons",19)(53,"ion-button",20),t.bIt("click",function(){return e.continueOrder()}),t.EFF(54," Lanjut "),t.nrm(55,"ion-icon",21),t.k0s()()()()()()()()()()()(),t.j41(56,"ion-modal",22),t.bIt("willDismiss",function(c){return e.onWillDismiss(c)}),t.DNE(57,x,26,5,"ng-container",23),t.k0s()()),2&n&&(t.Y8G("fullscreen",!0),t.R7$(7),t.Y8G("routerLink",t.lJ4(15,f)),t.R7$(12),t.Y8G("ngForOf",e.DataPaket),t.R7$(10),t.JRh(null==e.customer?null:e.customer.name),t.R7$(2),t.JRh(null==e.customer?null:e.customer.phone_number),t.R7$(5),t.SpI("",e.totalWeight," Kg"),t.R7$(2),t.SpI("",e.totalPieces," pcs"),t.R7$(2),t.SpI("",e.totalDistance," m"),t.R7$(7),t.JRh(t.bMT(48,13,e.totalPrice)),t.R7$(9),t.Y8G("isOpen",e.isModalOpen)("initialBreakpoint",1)("breakpoints",t.lJ4(16,P)),t.R7$(),t.Y8G("ngIf",e.isModalOpen))},dependencies:[p.Sq,p.bT,u.BC,u.vS,o.Jm,o.QW,o.b_,o.I9,o.ME,o.hU,o.W9,o.M0,o.lO,o.iq,o.KW,o.$w,o.uz,o.he,o.nf,o.To,o.Ki,o.ln,o.Nm,o.Ip,o.IO,o.BC,o.ai,o.Sb,o.Je,o.Gw,o.N7,d.Wk,_.G],styles:[".logo[_ngcontent-%COMP%]{height:150px;width:150px;display:flex;justify-content:center;align-items:center}.card[_ngcontent-%COMP%]{margin-top:50px;box-shadow:0 4px 8px #0000001a;border-top-left-radius:50px;border-top-right-radius:50px;max-width:max;height:100%}ion-segment-button[_ngcontent-%COMP%]{font-size:14px;font-weight:550}ion-button[_ngcontent-%COMP%]{font-size:14px;font-weight:550;margin-top:10px}.alert[_ngcontent-%COMP%]{margin-right:5px}p[_ngcontent-%COMP%]{cursor:pointer}.ikon[_ngcontent-%COMP%]{margin-right:20px}.search-bar-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:-15px;margin-bottom:10px;font-size:small;box-shadow:none;justify-content:center}ion-searchbar.custom-searchbar[_ngcontent-%COMP%]{--background: #cccccca8;--border-radius: 20px;--box-shadow: none;--border: 1px solid #cccccc78}ion-button.button-sc[_ngcontent-%COMP%]{--border-width: 30px}.horizontal-lines[_ngcontent-%COMP%]{margin-top:0%;border-top:1px solid #dcdcdc;margin-bottom:-10px}.list-container[_ngcontent-%COMP%]{height:calc(100vh - 50px)}ion-list[_ngcontent-%COMP%]{height:61%;overflow:auto}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600}.notdata[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;flex-direction:column;margin-top:25%}.toolbar-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;position:relative}.ikon[_ngcontent-%COMP%]{font-size:24px;position:absolute;left:0}.toolbar-title[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);font-size:17px;font-weight:600;margin:0}.spacer[_ngcontent-%COMP%]{flex:1}.teks[_ngcontent-%COMP%]{margin-left:20px;margin-right:28px}.select-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.select-button[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{width:40px;text-align:center}.select-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0 5px}.paket[_ngcontent-%COMP%]{font-weight:200}.name[_ngcontent-%COMP%]{font-weight:600}.profile-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%}.stats[_ngcontent-%COMP%]{display:flex;align-items:center}.stats-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.stats-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 5px}ion-title[_ngcontent-%COMP%]{font-weight:700;font-size:22px;padding-left:0}ion-icon[_ngcontent-%COMP%]{margin-left:5px}.right-buttons[_ngcontent-%COMP%]{justify-content:flex-end}.card-color[_ngcontent-%COMP%]{box-shadow:20px #b5a8a8}.color[_ngcontent-%COMP%]{background-color:#2dd55b}ion-modal[_ngcontent-%COMP%]{--height: 50%;--border-radius: 20px}.modal-container[_ngcontent-%COMP%]{padding:16px}.modal-header[_ngcontent-%COMP%]{border-radius:8px;text-align:center;padding:10px;margin-bottom:16px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700}.button-container1[_ngcontent-%COMP%]{margin-top:15px}ion-select[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:23px;padding:1px 1px 1px 50px;margin-bottom:11px}ion-textarea[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:23px;padding:1px 1px 1px 50px;margin-bottom:11px}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;height:auto;margin-top:10px}"]}),r})()}];let C=(()=>{var a;class r{}return(a=r).\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[d.iI.forChild(y),d.iI]}),r})();var O=l(1224);let j=(()=>{var a;class r{}return(a=r).\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[p.MD,u.YN,o.bv,C,O.S]}),r})()}}]);